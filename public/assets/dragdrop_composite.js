$(function(){function n(){var e=$("div#composite-template input").size(),t=new Array(e),n=new Array(e),r=new Array(e),i=0,s=0,o=$("ul#model-gallery img").size();for(var u=0;u<e;u++)t[u]=$("div#composite-template input:eq("+u+")").val();if(t[0]!=""){for(var a=0;a<e;a++)n[a]=$("div#composite-template div.is-droppable:eq("+a+")");for(var f=0;f<r.length;f++)for(var l=0;l<o;l++){s=$("ul#model-gallery img:eq("+l+")").prop("id");if(s==t[f]){r[f]=$("ul#model-gallery img:eq("+l+")").prop("src");break}}for(var c=0;c<e;c++){n[c].text(""),n[c].append('<img src="'+r[c]+'" alt="Model Photo" height="10">');var h=$("img",n[c]).width(),p=$("img",n[c]).height();h<p?$("img",n[c]).width(n[c].width()):$("img",n[c]).height(n[c].height())}}}var e=$("#model-gallery"),t=$("#composite-template");$("li",e).draggable({cancel:"p",revert:"invalid",containment:"document",helper:"clone",cursor:"move"}),$("div#composite-template div.is-droppable").droppable({drop:function(e,t){var n=$("img",t.draggable).prop("src");$(this).text(" "),$('<img src="'+n+'" alt="Model Photo" style="display:none;">').appendTo($(this));var r=$(this).width(),i=$(this).height(),s=$("img",this).width(),o=$("img",this).height();(s<r||s>r)&&$("img",this).width(r),$("img",this).fadeIn("slow"),$(this).prop("id")=="composite-cover"&&$("img",this).css("margin-top","-50px");switch($(this).prop("id")){case"composite-cover":$("input#composite_main_photo_id").val($("img",t.draggable).prop("id"));break;case"composite-01":$("input#composite_first_sub_photo_id").val($("img",t.draggable).prop("id"));break;case"composite-02":$("input#composite_second_sub_photo_id").val($("img",t.draggable).prop("id"));break;case"composite-03":$("input#composite_third_sub_photo_id").val($("img",t.draggable).prop("id"));break;case"composite-04":$("input#composite_fourth_sub_photo_id").val($("img",t.draggable).prop("id"))}}}),n()});